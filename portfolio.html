<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio — Annick Bouvattier</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#02253A;
      --ink:#fff;
      --soft:rgba(255,255,255,.82);
      --faint:rgba(255,255,255,.55);
      --border:rgba(255,255,255,.18);
      --chip:rgba(255,255,255,.08);
      --chip2:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--ink);
    }
    a{color:inherit;text-decoration:none}

    .container{
      width:100%;
      max-width:1400px;
      margin:0 auto;
      padding:20px 48px 56px;
    }
    @media (max-width:768px){.container{padding:16px 20px 40px}}

    /* HEADER */
    .top{
      display:flex;align-items:center;justify-content:space-between;
      gap:24px;padding:18px 0;
    }
    .brand{
      font-size:18px;font-weight:800;letter-spacing:.08em;
      text-transform:uppercase;line-height:1;padding-bottom:6px;white-space:nowrap;
    }
    .top__nav{display:flex;align-items:center;gap:20px;flex-wrap:wrap;justify-content:flex-end}
    .nav__link{
      font-size:16px;font-weight:500;
      border-bottom:2px solid transparent;
      padding:6px 2px 4px;line-height:1;
    }
    .nav__link:hover{border-bottom-color:rgba(255,255,255,.5)}
    .nav__link.is-active{border-bottom-color:#fff}

    /* FILTER BAR (Notion-like) */
    .filters{
      margin-top: 10px;
      border: 0;
      border-radius: 0;
      padding: 12px 0;
      background: transparent;
      display:grid;
      grid-template-columns: 1.4fr 1fr 1fr 1fr 1fr auto;
      gap: 10px;
      align-items:end;
    }
    @media (max-width: 1100px){ .filters{grid-template-columns: 1fr 1fr 1fr; } }
    @media (max-width: 700px){ .filters{grid-template-columns: 1fr; } }

    .field{display:flex;flex-direction:column;gap:6px;min-width:0}
    .label{
      font-size:12px;color:var(--faint);
      letter-spacing:.06em;text-transform:uppercase;font-weight:800;
    }
    input,select{
      height:44px;width:100%;
      border:1px solid var(--border);
      background:var(--chip);
      color:var(--ink);
      border-radius:0;
      padding:10px 12px;
      outline:none;
      font-size:14px;
    }
    input::placeholder{color:rgba(255,255,255,.45)}
    input:focus,select:focus{border-color:rgba(255,255,255,.35);background:var(--chip2)}
    .btn{
      height:44px;
      padding:0 14px;
      border-radius:0;
      border:1px solid var(--border);
      background:rgba(255,255,255,.14);
      color:var(--ink);
      font-weight:800;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn:hover{background:rgba(255,255,255,.18)}

    /* Title row */
    .metaRow{
      display:flex;align-items:baseline;justify-content:space-between;
      gap:16px;margin:18px 2px 10px;
    }
    .title{margin:0;font-size:22px;font-weight:800;letter-spacing:-.01em}
    .count{color:var(--faint);font-size:14px}

    /* Masonry */
    .masonry{column-gap: 14px; columns: 4;}
    @media (max-width:1200px){ .masonry{columns:3;} }
    @media (max-width:900px){ .masonry{columns:2;} }
    @media (max-width:520px){ .masonry{columns:1;} }

    .piece{break-inside: avoid;margin: 0 0 14px;cursor:pointer;}
    .imgWrap{
      border:1px solid rgba(255,255,255,.18);
      border-radius:0;
      overflow:hidden;
      background: rgba(255,255,255,.03);
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .piece:hover .imgWrap{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.35);
      background: rgba(255,255,255,.05);
    }
    .piece img{width:100%;height:auto;display:block;}

    .cap{padding: 8px 6px 0;text-align:center;}
    .capTitle{
      margin:0;font-weight:900;letter-spacing:.06em;text-transform:uppercase;
      font-size:12px;color:#fff;
    }
    .capMeta{
      margin:6px 0 0;font-size:12px;color: var(--faint);letter-spacing:.02em;
    }

    /* Badge avec point */
.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-top:6px;
  padding:4px 10px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.06);
  font-size:12px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:.05em;
}

/* Point */
.badge::before{
  content:"";
  width:8px;
  height:8px;
  border-radius:50%;
  display:inline-block;
}

/* DISPONIBLE */
.badge.disponible{
  color:#3ddc84;
  border-color:rgba(61,220,132,.5);
}
.badge.disponible::before{
  background:#3ddc84;
}

/* VENDUE */
.badge.vendue{
  color:#ff5c5c;
  border-color:rgba(255,92,92,.5);
  opacity:.85;
}
.badge.vendue::before{
  background:#ff5c5c;
}


    /* Modal */
    dialog{
      border:none;padding:0;border-radius:0;
      max-width:min(1100px, 94vw);
      background: rgba(10,20,30,.96);
      color: var(--ink);
    }
    dialog::backdrop{background:rgba(0,0,0,.7)}
    .modal{display:grid;grid-template-columns: 1.4fr 1fr;gap:0;}
    @media (max-width: 900px){ .modal{grid-template-columns:1fr;} }
    .modal__img{
      width:100%;height:100%;object-fit:contain;
      max-height: 86vh;display:block;background: rgba(255,255,255,.04);
    }
    .modal__side{padding:16px;border-left:1px solid rgba(255,255,255,.12);}
    @media (max-width: 900px){ .modal__side{border-left:none;border-top:1px solid rgba(255,255,255,.12);} }
    .modal__h{margin:0 0 10px;font-size:18px;font-weight:900;letter-spacing:.02em}
    .modal__p{margin:0 0 10px;color:var(--soft);line-height:1.5;font-size:14px}
    .modal__close{margin-top:10px;width:100%}
  </style>
</head>

<body>
  <div class="container">
    <header class="top">
      <a class="brand" href="index.html">ANNICK&nbsp;BOUVATTIER</a>
      <nav class="top__nav" aria-label="Navigation principale">
        <a class="nav__link" href="index.html">Accueil</a>
        <a class="nav__link is-active" href="portfolio.html">Portfolio</a>
        <a class="nav__link" href="galeries.html">Galeries</a>
        <a class="nav__link" href="expositions.html">Expositions</a>
        <a class="nav__link" href="informations.html">Informations</a>
        <a class="nav__link" href="apropos.html">À propos</a>
        <a class="nav__link" href="presse.html">Presse</a>
      </nav>
    </header>

    <!-- ✅ Filtres Notion -->
    <section class="filters" aria-label="Filtres">
      <div class="field">
        <div class="label">Nom</div>
        <input id="q" type="search" placeholder="Rechercher une œuvre…" />
      </div>

      <div class="field">
        <div class="label">Année</div>
        <select id="year">
          <option value="all">Toutes</option>
        </select>
      </div>

      <div class="field">
        <div class="label">Technique</div>
        <select id="technique">
          <option value="all">Toutes</option>
        </select>
      </div>

      <div class="field">
        <div class="label">Taille</div>
        <select id="size">
          <option value="all">Toutes</option>
        </select>
      </div>

      <div class="field">
        <div class="label">Disponible / Vendue</div>
        <select id="status">
          <option value="all">Toutes</option>
          <option value="disponible">Disponible</option>
          <option value="vendue">Vendue</option>
        </select>
      </div>

      <button class="btn" id="reset" type="button">Réinitialiser</button>
    </section>

    <div class="metaRow">
      <h1 class="title">Portfolio</h1>
      <div class="count" id="count"></div>
    </div>

    <section class="masonry" id="masonry" aria-label="Œuvres"></section>
  </div>

  <dialog id="modal">
    <div class="modal">
      <img class="modal__img" id="modalImg" alt="">
      <div class="modal__side">
        <h2 class="modal__h" id="modalTitle"></h2>
        <p class="modal__p" id="modalMeta"></p>
        <p class="modal__p" id="modalDesc"></p>
        <button class="btn modal__close" id="modalClose" type="button">Fermer</button>
      </div>
    </div>
  </dialog>

  <script>
    // ✅ Exemple : adapte avec tes vraies infos (et plus tard: injecter depuis Notion)
    const artworks = [
      { title:"Dimanche", year:2024, technique:"HST", size:"46 x 38 cm", status:"disponible", image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?auto=format&fit=crop&w=1600&q=80", desc:"" },
      { title:"Saint-Germain Express", year:2024, technique:"HST", size:"73 x 92 cm", status:"disponible", image:"https://images.unsplash.com/photo-1513364776144-60967b0f800f?auto=format&fit=crop&w=1600&q=80", desc:"" },
      { title:"Portrait en bleu", year:2024, technique:"HST", size:"46 x 55 cm", status:"disponible", image:"https://images.unsplash.com/photo-1549880338-65ddcdfd017b?auto=format&fit=crop&w=1600&q=80", desc:"" },
      { title:"Premiers soleils", year:2024, technique:"HST", size:"38 x 46 cm", status:"vendue", image:"https://images.unsplash.com/photo-1526318472351-c75fcf070305?auto=format&fit=crop&w=1600&q=80", desc:"" },
      { title:"Incognito", year:2024, technique:"HST", size:"81 x 116 cm", status:"disponible", image:"https://images.unsplash.com/photo-1526498460520-4c246339dccb?auto=format&fit=crop&w=1600&q=80", desc:"" },
      { title:"Museum", year:2024, technique:"HST", size:"120 x 120 cm", status:"disponible", image:"https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=1600&q=80", desc:"" }
    ];

    const els = {
      q: document.getElementById("q"),
      year: document.getElementById("year"),
      technique: document.getElementById("technique"),
      size: document.getElementById("size"),
      status: document.getElementById("status"),
      reset: document.getElementById("reset"),
      masonry: document.getElementById("masonry"),
      count: document.getElementById("count"),
      modal: document.getElementById("modal"),
      modalImg: document.getElementById("modalImg"),
      modalTitle: document.getElementById("modalTitle"),
      modalMeta: document.getElementById("modalMeta"),
      modalDesc: document.getElementById("modalDesc"),
      modalClose: document.getElementById("modalClose"),
    };

    function uniq(arr){ return [...new Set(arr)].sort((a,b)=> (""+a).localeCompare(""+b)); }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // normalise "46×38 cm" / "46 x 38 cm" / "46x38cm"
    function normSize(s){
      return String(s)
        .toLowerCase()
        .replaceAll("×","x")
        .replace(/\s+/g," ")
        .replace(/\s*x\s*/g," x ")
        .replace(/\s*cm\s*/g," cm")
        .trim();
    }

    function hydrateFilters(){
      const years = uniq(artworks.map(a=>a.year)).sort((a,b)=>b-a);
      const techniques = uniq(artworks.map(a=>a.technique));
      const sizes = uniq(artworks.map(a=>normSize(a.size)));

      years.forEach(y=>{
        const opt = document.createElement("option");
        opt.value = String(y);
        opt.textContent = String(y);
        els.year.appendChild(opt);
      });

      techniques.forEach(t=>{
        const opt = document.createElement("option");
        opt.value = t;
        opt.textContent = t;
        els.technique.appendChild(opt);
      });

      sizes.forEach(s=>{
        const opt = document.createElement("option");
        opt.value = s;
        opt.textContent = s;
        els.size.appendChild(opt);
      });
    }

    function match(a, f){
      const q = (f.q||"").trim().toLowerCase();
      if(q && !a.title.toLowerCase().includes(q)) return false;

      if(f.year !== "all" && String(a.year) !== f.year) return false;
      if(f.technique !== "all" && a.technique !== f.technique) return false;
      if(f.size !== "all" && normSize(a.size) !== f.size) return false;
      if(f.status !== "all" && a.status !== f.status) return false;

      return true;
    }

    function render(){
      const f = {
        q: els.q.value || "",
        year: els.year.value,
        technique: els.technique.value,
        size: els.size.value,
        status: els.status.value
      };

      const list = artworks.filter(a => match(a, f));

      els.masonry.innerHTML = "";
      list.forEach(a=>{
        const item = document.createElement("article");
        item.className = "piece";
        item.innerHTML = `
          <div class="imgWrap">
            <img src="${a.image}" alt="${escapeHtml(a.title)}" loading="lazy">
          </div>
          <div class="cap">
            <p class="capTitle">${escapeHtml(a.title)}</p>
            <p class="capMeta">${escapeHtml(a.technique)} · ${escapeHtml(a.size)} · ${a.year}</p>
            <span class="badge ${a.status === "vendue" ? "sold" : ""}">
              ${a.status === "vendue" ? "VENDUE" : "DISPONIBLE"}
            </span>
          </div>
        `;
        item.addEventListener("click", ()=> openModal(a));
        els.masonry.appendChild(item);
      });

      els.count.textContent = `${list.length} œuvre${list.length>1 ? "s" : ""}`;
    }

    function openModal(a){
      els.modalImg.src = a.image.replace("w=1600","w=2400");
      els.modalImg.alt = a.title;
      els.modalTitle.textContent = a.title.toUpperCase();
      els.modalMeta.textContent = `${a.technique} · ${a.size} · ${a.year} · ${a.status === "vendue" ? "VENDUE" : "DISPONIBLE"}`;
      els.modalDesc.textContent = a.desc || "";
      els.modal.showModal();
    }
    function closeModal(){ els.modal.close(); }

    ["input","change"].forEach(evt=>{
      els.q.addEventListener(evt, render);
      els.year.addEventListener(evt, render);
      els.technique.addEventListener(evt, render);
      els.size.addEventListener(evt, render);
      els.status.addEventListener(evt, render);
    });

    els.reset.addEventListener("click", ()=>{
      els.q.value = "";
      els.year.value = "all";
      els.technique.value = "all";
      els.size.value = "all";
      els.status.value = "all";
      render();
    });

    els.modalClose.addEventListener("click", closeModal);
    els.modal.addEventListener("click", (e)=>{ if(e.target === els.modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape" && els.modal.open) closeModal(); });

    hydrateFilters();
    render();
  </script>
</body>
</html>

